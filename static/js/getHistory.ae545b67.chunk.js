(self.webpackChunkweb3_react=self.webpackChunkweb3_react||[]).push([[296,314,861,951],{57066:function(n,e,r){"use strict";r.r(e),r.d(e,{getHistory:function(){return p}});var t,a=r(74165),i=r(70885),o=r(30168),u=r(15861),d=r(16805),c=r(49716),s=r(48101),l=r(19778).Buffer,f={Domain:{NewOwner:function(n){return{owner:n.owner.id}},NewResolver:function(n){return{resolver:n.resolver.id.split("-")[0]}},Transfer:function(n){return{owner:n.owner.id}},NewTTL:function(n){return{ttl:n.ttl}}},Registration:{NameRegistered:function(n){return{registrant:n.registrant.id,expiryDate:n.expiryDate}},NameRenewed:function(n){return{expiryDate:n.expiryDate}},NameTransferred:function(n){return{owner:n.newOwner.id}}},Resolver:{AddrChanged:function(n){return{addr:n.addr.id}},MulticoinAddrChanged:function(n){var e=d.$c[parseInt(n.coinType)];return e?"0x"===c.hexStripZeros(n.multiaddr)?{coinType:n.coinType,coinName:e.name,rawAddr:"0x"}:{coinType:n.coinType,coinName:e.name,addr:e.encoder(l.from(n.multiaddr.slice(2),"hex"))}:{coinType:n.coinType,rawAddr:n.multiaddr}},NameChanged:function(n){return{name:n.name}},AbiChanged:function(n){return{contentType:n.contentType}},PubkeyChanged:function(n){return{x:n.x,y:n.y}},TextChanged:function(n){return{key:n.key,value:n.value}},ContenthashChanged:function(n){return{hash:(0,s.K5)(n.hash)}},InterfaceChanged:function(n){return{interfaceId:n.interfaceId,implementer:n.implementer}},AuthorisationChanged:function(n){return{owner:n.owner,target:n.target,isAuthorized:n.isAuthorized}}}},m=function(n,e){return n.map((function(n){return{type:n.__typename,blockNumber:n.blockNumber,transactionHash:n.transactionID,id:n.id,data:f[e][n.__typename](n)}}))};function p(n,e){return h.apply(this,arguments)}function h(){return(h=(0,u.Z)((0,a.Z)().mark((function n(e,r){var u,d,c,s,l,f,p,h,g,y,w,b,v,T,C;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=e.gqlInstance,d=u.client,c=u.gql(t||(t=(0,o.Z)(["\n      query getHistory($name: String!, $label: String!) {\n        domains(where: { name: $name }) {\n          events {\n            id\n            blockNumber\n            transactionID\n            __typename\n            ...on Transfer {\n              owner {\n                id\n              }\n            }\n            ...on NewOwner {\n              owner {\n                id\n              }\n            }\n            ...on NewResolver {\n              resolver {\n                id\n              }\n            }\n            ...on NewTTL {\n              ttl\n            }\n          }\n          owner {\n            registrations (where: { labelName: $label }) {\n              events {\n                id\n                blockNumber\n                transactionID\n                __typename\n                ...on NameRegistered {\n                  registrant {\n                    id\n                  }\n                  expiryDate\n                }\n                ...on NameRenewed {\n                  expiryDate\n                }\n                ...on NameTransferred {\n                  newOwner {\n                    id\n                  }\n                }\n              }\n            }\n          }\n          resolver {\n            events {\n              id\n              blockNumber\n              transactionID\n              __typename\n              ...on AddrChanged {\n                addr {\n                  id\n                }\n              }\n              ...on MulticoinAddrChanged {\n                coinType\n                multiaddr: addr\n              }\n              ...on NameChanged {\n                name\n              }\n              ...on AbiChanged {\n                contentType\n              }\n              ...on PubkeyChanged {\n                x\n                y\n              }\n              ...on TextChanged {\n                key\n                value\n              }\n              ...on ContenthashChanged {\n                hash\n              }\n              ...on InterfaceChanged {\n                interfaceID\n                implementer\n              }\n              ...on AuthorisationChanged {\n                owner\n                target\n                isAuthorized\n              }\n            }\n          }\n        }\n      }\n      "]))),s=r.split(".")[0],n.next=6,d.request(c,{name:r,label:s});case 6:if(l=n.sent,(f=l.domains)&&0!==f.length){n.next=10;break}return n.abrupt("return");case 10:return p=(0,i.Z)(f,1),h=p[0],g=h.events,y=(0,i.Z)(h.owner.registrations,1),w=y[0].events,b=h.resolver.events,v=m(g,"Domain"),T=m(w,"Registration"),C=m(b.filter((function(n){return!n.coinType||"60"!==n.coinType})),"Resolver"),n.abrupt("return",{domain:v,registration:T,resolver:C});case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)}},49496:function(){},30168:function(n,e,r){"use strict";function t(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}r.d(e,{Z:function(){return t}})}}]);
//# sourceMappingURL=getHistory.ae545b67.chunk.js.map